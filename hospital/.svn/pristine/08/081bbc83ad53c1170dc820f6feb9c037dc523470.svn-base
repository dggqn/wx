<view class="container flex-column">
  <view class="address-info-box">
    <view class="address-bg linear-bg"></view>
    <view class="address-info flex-align-items-center">
      <!-- 填写填报人信息 -->
      <van-cell-group inset>
        <van-field value="{{ Submit_UserInfo.deptName}}" left-icon="wap-home-o" clearable label="科室" placeholder="请输入科室名" bind:change="deptNameChange" />
        <van-field value="{{ Submit_UserInfo.linkman }}" left-icon="friends-o" clearable label="申领人" placeholder="请输入领取人姓名" bind:change="linkmanChange" />
        <van-field value="{{ Submit_UserInfo.linktel }}" left-icon="phone-o" clearable label="申领人手机号" type="number" placeholder="请输入本人手机号" bind:change="linktelChange" />
        <!-- <van-field value="{{ taskDetail.supplyName }}" left-icon="send-gift-o" clearable label="物资名称：" placeholder="" readonly="true" /> -->
        <van-field value="{{ Submit_UserInfo.reAddress }}" left-icon="location-o" clearable label="收货地址" placeholder="例如楼栋号，几层几室" bind:change="addressChange" />
        <van-cell title="数量">
          <van-stepper value="{{ Submit_quantity }}" bind:change="onChange" />
        </van-cell>
        <van-field value="{{ Submit_UserInfo.reRemark }}" clearable label="备注" placeholder="（非必填）" bind:change="remarksChange" />
      </van-cell-group>
      <view class="bottom-bg"></view>
    </view>
  </view>

  <!-- 任务信息 -->
  <view class="address-info-box btm130">
    <van-cell-group inset>
      <van-cell title="任务名：" value="{{taskDetail.name?taskDetail.name:Submit_UserInfo.taskName}}" />
      <view class="spec-item">
        <view class="item-title">任务描述：</view>
        <view class="item-detail">
          <rich-text nodes="{{taskDetail.description?taskDetail.description:edit_description}}"></rich-text>
        </view>
      </view>
      <van-cell title="物资名称：" value="{{taskDetail.supplyName?taskDetail.supplyName:edit_supplyName}}" />
    </van-cell-group>
  </view>

  <view class="update-container flex-1 overflow-auto">
    <!-- list -->
    <view class="update-list" wx:if="{{goodsInfo}}">
      <view class="list-item" wx:for="{{1}}" wx:key="index">
        <view class="item-top flex">
          <view class="item-img img-box">
            <image mode="aspectFit" src="{{item.displayImgUrl || 'https://hospital-assets-image-public.oss-cn-shanghai.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E4%B8%8A%E6%B5%B7%E7%AC%AC%E5%9B%9B%E4%BA%BA%E6%B0%91%E5%8C%BB%E9%99%A2/images/default.png'}}"></image>
          </view>
          <view class="item-detail flex-1">
            <view class="item-name">name{{item.name}}</view>
            <view class="item-spec">
              <view class="spec flex-1">specificationName{{item.specificationName}}</view>
              <view>单位：份{{item.stockUnit}}</view>
            </view>
            <view class="item-remark">remark{{item.remark}}</view>
          </view>
        </view>
        <view class="item-bottom">

        </view>
      </view>
      <view class="look-more" wx:if="{{applyList.length>showList.length}}" bindtap="showAll">查看更多</view>
    </view>
  </view>
  <!-- 申领理由 -->
  <!-- <view class="apply-reason flex">
    <view class="reason-l linear-bg">申领理由</view>
    <view class="reason-r flex-1">
      <textarea class="reason-textarea" value="{{applyReason}}" data-path="applyReason" bindinput="viewValueChange" placeholder="请填写您申领的原因（选填)" placeholder-class="placeholder-class"></textarea>
    </view>
  </view> -->
  <view class="confirm-update flex-align-items-center">
    <view class="update-num flex-1">
      <block wx:if="{{taskDetail.closeTime}}">截至时间：{{taskDetail.closeTime}}</block>
    </view>
    <view class="update-btn purple-bg" bindtap="submitApply">
      <block wx:if="{{action_type == 'insert'}}">
        提交申请
      </block>
      <block wx:if="{{action_type == 'update'}}">
        保存
      </block>
    </view>
  </view>
  <!-- 选择地址弹窗 -->
  <van-popup show="{{ selectAddressModal }}" position="bottom" round="true" bind:click-overlay="closeAddressModal">
    <view class="address-list-box flex-column">
      <view class="list-top flex-align-items-center">
        <view class="list-title flex-1">选择收货地址</view>
        <text class="iconfont iconguanbi-new-01" bindtap="closeAddressModal"></text>
      </view>
      <view class="list-center flex-1 overflow-auto">
        <address-cell id="address-cell" list="{{addressList}}" bind:click="changeDefaultAddress" bind:refresh="getAddressList"></address-cell>
        <!-- 空图片 -->
        <view class="empty-box" wx:if="{{addressList.length <= 0}}">
          <image class="empty-img" src="{{aliyunBaseImgUrlPre}}images/empty.png"></image>
          <view class="empty-tip">您还没有收货地址哦！</view>
        </view>
      </view>

    </view>
    <view class="add-address-box flex-shink-0 flex-center">
      <view class="add-address-btn" bindtap="addAddress">
        <text class="iconfont "></text>
        <text>新增收货地址</text>
      </view>
    </view>
  </van-popup>
</view>